(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4522:(e,t,s)=>{Promise.resolve().then(s.bind(s,1513))},1513:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(5155),a=s(2115);let d=()=>{let[e,t]=(0,a.useState)("one-bit"),[s,d]=(0,a.useState)("NT"),[n,c]=(0,a.useState)("00"),[l]=(0,a.useState)([{id:1,type:"add",text:"add r1, r0, #5",comment:"Initialize loop counter"},{id:2,type:"add",text:"LOOP: add r2, r2, r3",comment:"Loop body"},{id:3,type:"sub",text:"sub r1, r1, #1",comment:"Decrement counter"},{id:4,type:"branch",text:"bne r1, r0, LOOP",actual:"T",comment:"First branch: Taken",dependsOn:[3]},{id:5,type:"add",text:"add r2, r2, r3",comment:"Loop iteration 2"},{id:6,type:"sub",text:"sub r1, r1, #1",comment:"Decrement counter"},{id:7,type:"branch",text:"bne r1, r0, LOOP",actual:"T",comment:"Second branch: Taken",dependsOn:[6]},{id:8,type:"add",text:"add r2, r2, r3",comment:"Loop iteration 3"},{id:9,type:"sub",text:"sub r1, r1, #1",comment:"Decrement counter"},{id:10,type:"branch",text:"bne r1, r0, LOOP",actual:"T",comment:"Third branch: Taken",dependsOn:[9]},{id:11,type:"add",text:"add r2, r2, r3",comment:"Loop iteration 4"},{id:12,type:"sub",text:"sub r1, r1, #1",comment:"Decrement counter"},{id:13,type:"branch",text:"bne r1, r0, LOOP",actual:"T",comment:"Fourth branch: Taken",dependsOn:[12]},{id:14,type:"add",text:"add r2, r2, r3",comment:"Final iteration"},{id:15,type:"sub",text:"sub r1, r1, #1",comment:"Counter reaches zero"},{id:16,type:"branch",text:"bne r1, r0, LOOP",actual:"NT",comment:"Final branch: Not Taken",dependsOn:[15]},{id:17,type:"add",text:"add r4, r2, r0",comment:"Post-loop operation"}]),[i,m]=(0,a.useState)(1),[o,x]=(0,a.useState)(1),[b,h]=(0,a.useState)(new Map),[p,u]=(0,a.useState)(new Map),[g,j]=(0,a.useState)({correct:0,incorrect:0,dataStalls:0,branchStalls:0}),N=()=>l.every(e=>{let t=b.get(e.id);return t&&t.W}),f=()=>"one-bit"===e?s:n.startsWith("1")?"T":"NT",w=t=>{if("one-bit"===e)d(t);else{let e=parseInt(n,2);c(("T"===t?Math.min(e+1,3):Math.max(e-1,0)).toString(2).padStart(2,"0"))}},y=(e,t)=>!!e.dependsOn&&e.dependsOn.some(e=>{let s=b.get(e);return s&&!s.W&&s.F<t}),S=(e,t)=>{if(0===e)return!0;let s=l[e-1],r=t.get(s.id);return r&&r.D},v=(e,t)=>{l.forEach((s,r)=>{r>e&&t.delete(s.id)})},T=(e,t)=>e.W===t?"W":e.M===t?"M":e.E===t?"E":e.D===t?"D":e.F===t?"F":"",O=(e,t)=>{if(t)return"bg-gray-200";switch(e){case"F":return"bg-blue-100";case"D":return"bg-green-100";case"E":return"bg-yellow-100";case"M":return"bg-orange-100";case"W":return"bg-red-100";default:return""}};return(0,r.jsxs)("div",{className:"w-full max-w-[90rem] mx-auto p-4 md:p-6",children:[(0,r.jsx)("h1",{className:"text-xl md:text-2xl font-bold mb-4 md:mb-6",children:"Pipeline Stage Visualization with Stalls"}),(0,r.jsxs)("div",{className:"mb-4 md:mb-6 p-3 md:p-4 border rounded bg-gray-50 flex flex-col md:flex-row md:items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"font-semibold text-sm md:text-base",children:"Predictor Type:"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm md:text-base ".concat("one-bit"===e?"text-blue-600":"text-gray-500"),children:"One-Bit"}),(0,r.jsx)("button",{onClick:()=>t(e=>"one-bit"===e?"two-bit":"one-bit"),className:"relative inline-flex h-5 md:h-6 w-10 md:w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{backgroundColor:"two-bit"===e?"#3B82F6":"#D1D5DB"},children:(0,r.jsx)("span",{className:"".concat("two-bit"===e?"translate-x-5 md:translate-x-6":"translate-x-1"," inline-block h-3 md:h-4 w-3 md:w-4 transform rounded-full bg-white transition-transform")})}),(0,r.jsx)("span",{className:"text-sm md:text-base ".concat("two-bit"===e?"text-blue-600":"text-gray-500"),children:"Two-Bit"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"font-semibold text-sm md:text-base",children:"Current State:"}),"one-bit"===e?(0,r.jsxs)("div",{className:"flex gap-4 text-sm md:text-base",children:[(0,r.jsxs)("p",{children:["State: ",s]}),(0,r.jsxs)("p",{children:["Prediction: ",s]})]}):(0,r.jsxs)("div",{className:"flex gap-4 text-sm md:text-base",children:[(0,r.jsxs)("p",{children:["State: ",n," (","00"===n?"Strong NT":"01"===n?"Weak NT":"10"===n?"Weak T":"Strong T",")"]}),(0,r.jsxs)("p",{children:["Prediction: ",n.startsWith("1")?"T":"NT"]})]})]})]}),(0,r.jsxs)("div",{className:"mb-4 md:mb-6 flex gap-4",children:[(0,r.jsxs)("button",{onClick:()=>{if(N())return;let e=new Map(b),t=new Map(p),s=0,r=0;l.forEach((a,d)=>{let n=e.get(a.id)||{},c=t.get(a.id)||{};if(!n.F&&S(d,e)&&(n.F=i),n.F&&(!n.D&&n.F<i&&(y(a,i)?(c[i]="D",s++):n.D=i),!n.E&&n.D&&n.D<i&&(n.E=i),!n.M&&n.E&&n.E<i&&(n.M=i),!n.W&&n.M&&n.M<i&&(n.W=i),"branch"===a.type&&n.E===i)){let t=f()===a.actual;t||(c[i+1]="B",c[i+2]="B",r+=2,v(d,e)),w(a.actual),j(e=>({...e,correct:e.correct+(t?1:0),incorrect:e.incorrect+(t?0:1)}))}e.set(a.id,n),t.set(a.id,c)}),h(e),u(t),m(e=>e+1),x(e=>Math.max(e,i+1)),j(e=>({...e,dataStalls:e.dataStalls+s,branchStalls:e.branchStalls+r}))},disabled:N(),className:"px-3 md:px-4 py-2 text-sm md:text-base bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:["Step Cycle",N()?" (Complete)":""]}),(0,r.jsx)("button",{onClick:()=>{m(1),x(1),h(new Map),u(new Map),d("NT"),c("00"),j({correct:0,incorrect:0,dataStalls:0,branchStalls:0})},className:"px-3 md:px-4 py-2 text-sm md:text-base bg-gray-500 text-white rounded hover:bg-gray-600",children:"Reset"})]}),(0,r.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Pipeline Stages"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse text-sm md:text-base",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border p-2 md:p-3",children:"Instruction"}),(0,r.jsx)("th",{className:"border p-2 md:p-3",children:"Comment"}),[...Array(o)].map((e,t)=>(0,r.jsx)("th",{className:"border p-2 md:p-3 w-8 md:w-12",children:t+1},t))]})}),(0,r.jsx)("tbody",{children:l.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border p-2 md:p-3 font-mono whitespace-nowrap",children:e.text}),(0,r.jsx)("td",{className:"border p-2 md:p-3 text-xs md:text-sm text-gray-600",children:e.comment||""}),[...Array(o)].map((t,s)=>{let a=b.get(e.id)||{},d=p.get(e.id)||{},n=T(a,s+1),c=d[s+1];return(0,r.jsx)("td",{className:"border p-1 md:p-2 text-center ".concat(O(n,c)),children:c?"S".concat(c):n},s)})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"mb-4 md:mb-6 p-3 md:p-4 border rounded bg-gray-50",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Statistics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-sm md:text-base",children:[(0,r.jsxs)("p",{children:["Current Cycle: ",i]}),(0,r.jsxs)("p",{children:["Branch Predictions: ",g.correct," correct, ",g.incorrect," incorrect"]}),(0,r.jsxs)("p",{children:["Stalls: ",g.dataStalls," data hazard, ",g.branchStalls," branch misprediction"]}),(0,r.jsxs)("p",{children:["Total Stall Cycles: ",g.dataStalls+g.branchStalls]}),(0,r.jsxs)("p",{children:["Prediction Accuracy: ",g.correct+g.incorrect>0?(g.correct/(g.correct+g.incorrect)*100).toFixed(1)+"%":"0%"]})]})]}),(0,r.jsxs)("div",{className:"mt-4 md:mt-6 p-3 md:p-4 border rounded",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Legend"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 text-sm md:text-base",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-blue-100 mr-2"}),(0,r.jsx)("span",{children:"Fetch (F)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-green-100 mr-2"}),(0,r.jsx)("span",{children:"Decode (D)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-yellow-100 mr-2"}),(0,r.jsx)("span",{children:"Execute (E)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-orange-100 mr-2"}),(0,r.jsx)("span",{children:"Memory (M)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-red-100 mr-2"}),(0,r.jsx)("span",{children:"Writeback (W)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-5 md:w-6 h-5 md:h-6 bg-gray-200 mr-2"}),(0,r.jsx)("span",{children:"Stall (SD/SB)"})]})]})]})]})};function n(){return(0,r.jsx)("main",{className:"min-h-screen p-4",children:(0,r.jsx)(d,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(4522)),_N_E=e.O()}]);